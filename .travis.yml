language: python
python:
  - 3.8

addons:
  artifacts:
    paths:
      - files

install:
  - python -m pip install --upgrade pip
  - pip3 install -r requirements.txt
  - cd files
  - python3 -m sphinx -b html . _build/html
  - mv _build/html/ ../
only:
  - gh-pages
deploy:
  local_dir: output
  provider: pages
  skip_cleanup: true
  github_token: $GITHUB_TOKEN  # Set in the settings page of your repository, as a secure variable
  keep_history: true
  target_branch: master
  on:
    branch: gh-pages